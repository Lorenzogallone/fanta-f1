rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Classifica: lettura e scrittura per tutti
    match /ranking/{docId} {
      allow read, write: if true;
    }

    // Gare: lettura e scrittura per tutti
    match /races/{raceId} {
      allow read, write: if true;

      // Formazioni: lettura e scrittura per tutti
      match /submissions/{userId} {
        allow read, write: if true;
      }
    }

    // Risultati campionato: lettura e scrittura per tutti
    match /championship/{docId} {
      allow read, write: if true;
    }

    // Regola di fallback: blocca tutto il resto
    match /{document=**} {
      allow read, write: if false;
    }
  }
}